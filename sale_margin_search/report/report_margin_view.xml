<?xml version="1.0" encoding="UTF-8"?>
<openerp>
	<data>
		<record id="view_report_account_invoice_filter" model="ir.ui.view">
			<field name="name">account.invoice.product.filter.salemarginsearch
			</field>
			<field name="model">report.account.invoice.product</field>
			<field name="type">search</field>
			<field name="inherit_id" ref="sale_margin.view_report_account_invoice_filter" />
			<field name="arch" type="xml">
				<xpath expr="//group/filter[@string='Draft']" position="before">
					<filter string="Customer" icon="terp-personal" name="customer"
						domain="['|',('type','=','out_invoice'),('type','=','out_refund')]"
						help="Show only Customer Invoices and Refunds" />
					<filter string="Supplier" icon="terp-partner" name="supplier"
						domain="['|',('type','=','in_invoice'),('type','=','in_refund')]"
						help="Show only Supplier Invoices and Refunds" />
					<separator orientation="vertical" />
				</xpath>
				<xpath expr="//group[@string='Group By...']/filter[@string='State']"
					position="after">
					<filter string="Type" name="grptype" icon="terp-stock_symbol-selection"
						context="{'group_by':'type'}" />
				</xpath>
				<xpath expr="//group[@string='Group By...']/filter[@string='Partner']"
					position="replace">
					<filter string="Partner" name="grppartner" icon="terp-partner"
						context="{'group_by':'partner_id'}" />
				</xpath>
				<xpath expr="//group[@string='Group By...']/filter[@string='Year']"
					position="replace">
					<filter string="Year" name="grpyear" icon="terp-go-year"
						context="{'group_by':'year'}" />
				</xpath>
				<xpath expr="//group[@string='Group By...']/filter[@string='Month']"
					position="replace">
					<filter string="Month" name="grpmonth" icon="terp-go-month"
						context="{'group_by':'month'}" />
				</xpath>

			</field>
		</record>


		<record id="action_report_account_invoice_report_customers"
			model="ir.actions.act_window">
			<field name="name">Invoice Analysis on Customers</field>
			<field name="res_model">report.account.invoice.product</field>
			<field name="view_type">form</field>
			<field name="view_mode">tree,graph</field>
			<field name="context">{"search_default_customer":1,"search_default_At Date":1,'group_by_no_leaf':1,'group_by':['partner_id', 'type', 'year', 'month'], "search_default_grppartner":1,"search_default_grptype":1,"search_default_grpyear":1,"search_default_grpmonth":1}</field>
			<field name="search_view_id" ref="view_report_account_invoice_filter" />
			<field name="help">This report gives you an overview of all the
				invoices generated by the system. You can sort and group your
				results by specific selection criteria to quickly find what you are
				looking for. It is prepared for Customer Invoices and Refunds by
				Partner, Year and Month.
			</field>
		</record>

		<menuitem name="Customer Invoices" id="menu_report_account_invoice_report_customers"
			parent="sale_margin.menu_report_account_invoice_product" action="action_report_account_invoice_report_customers"
			groups="account.group_account_manager" />

		<record id="action_report_account_invoice_report_suppliers"
			model="ir.actions.act_window">
			<field name="name">Invoice Analysis on Suppliers</field>
			<field name="res_model">report.account.invoice.product</field>
			<field name="view_type">form</field>
			<field name="view_mode">tree,graph</field>
			<field name="context">{"search_default_supplier":1,"search_default_At Date":1,'group_by_no_leaf':1,'group_by':['partner_id', 'type', 'year', 'month'], "search_default_grppartner":1,"search_default_grptype":1,"search_default_grpyear":1,"search_default_grpmonth":1}</field>
			<field name="search_view_id" ref="view_report_account_invoice_filter" />
			<field name="help">This report gives you an overview of all the
				invoices generated by the system. You can sort and group your
				results by specific selection criteria to quickly find what you are
				looking for. It is prepared for Supplier Invoices and Refunds by
				Partner, Year and Month.
			</field>
		</record>

		<menuitem name="Supplier Invoices" id="menu_report_account_invoice_report_suppliers"
			parent="sale_margin.menu_report_account_invoice_product" action="action_report_account_invoice_report_suppliers"
			groups="account.group_account_manager" />


	</data>
</openerp>
